@inherits Nancy.ViewEngines.Razor.NancyRazorViewBase<MtgDb.Info.PlaneswalkerModel>
@using System.Collections.Generic;
@using System.Linq;
@using  MtgDb.Info;
@{
  Layout = "_Layout.cshtml";
}
@section Top
{
    <div style="color:white;margin-left:50px;">
    <h4>Your Library</h4>
    Unique cards owned <b>@Model.TotalCards</b> of 22000. Total number of cards (including duplicates) owned: <b>@Model.TotalAmount</b>
    </div>
}
<div class="tab-container" id="outer-container">
    <ul class='etabs'>
        @foreach(KeyValuePair<string, int> k in Model.Blocks)
        {
            string c = k.Key == Model.Block ? "active" : "";
            <li class='tab @c'>
                <a href="~/@Model.Planeswalker.UserName/blocks/@k.Key/cards/">
                    @k.Key
                    <span class="badge">@k.Value</span>
                </a>
            </li>
        }
    </ul>
     <div class="panel-container">
        <div id="nested-tab-1">
            <div class="tab-container" id="outer-container">
    <ul class='etabs'>
    @foreach(CardSet set in Model.Sets)
    {
        string c = set.Id == Model.SetId ? "active" : "";
        string show = Model.Show && set.Id == Model.SetId ? "" : 
        !Model.Show && set.Id == Model.SetId ? "?show=true" : "";

        string imgUrl = string.Format("http://api.mtgdb.info/content/set_images/symbols/{0}_sym.gif",set.Id.ToLower());
        <li class='tab @c'>
            <a href="~/@Model.Planeswalker.UserName/blocks/@set.Block/cards/@set.Id/@show">
                <img src="@imgUrl" /> @set.Name
                <span class="badge">@Model.Counts[set.Id]</span>
            </a>
        </li>
    }
    </ul>
    <div class="panel-container">
        <div id="nested-tab-1">
        @foreach(var cardInfo in Model.Cards)
        {
            <div style="float:left;">
            <div style="text-align:center;">
            <a href="~/cards/@cardInfo.Card.Id" class="thumbnail tool" data-toggle="tooltip" data-placement="top" 
            title="<b>@cardInfo.Card.Name</b> #@cardInfo.Card.SetNumber<br /> @cardInfo.Card.Description.Replace("\"","'") <br /><span class='label label-primary'>@cardInfo.Card.Power &#47; @cardInfo.Card.Toughness</span><br /><b>You have:</b> <span class='badge'>@cardInfo.Amount</span><br />" data-html="true">
            @if(cardInfo.Amount > 0)
            {
                <img src="@cardInfo.Card.CardImage" style="width:111px;height:155px;" />
            }
            else
            {
                <img src="@cardInfo.Card.CardImage" class="dontown" style="width:111px;height:155px;" />
            }
            </a>
           </div>
           </div><!--/span-->
        }
        </div>
    <br style="clear:both;" />
    </div>
</div> 
        </div>
     </div>
</div>
<script>
    $('.tool').tooltip();
</script>
<br style="clear:both;" />
